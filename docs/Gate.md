locale: `ru_RU` (native)

# Gate :: Вход, регистрация и аутефикация на сервере

## `POST /gate/connect`

Присоединиться к серверу.

Не важно - регистрация или вход (sign in / sign up)

- Регистрация: логин ИЛИ токен пользователя не найдены в БД. Поиск по токену сделан чтобы допустить смену ника
- Логин: если токен совпадает => пропустить без пароля; если совпадает только ник => запросить пароль. При верном вводе пароля токен **на клиенте** обновляется на токен с сервера.

**REQ BODY:**

```ts
{
  login: string(len 3-20*)
  token?: string(len 1-1000)
}
```

\* modifiable for server administrators

**RESPONSE:**

```ts
//Дружеский сервер, пароль не нужен
// ИЛИ
//Логин и токен совпадают (публичный сервер)
status: 200 //OK
//Действия после ответа: -
```

```ts
//Регистрация на публичном сервере
status: 401 //Unauthorized
body: {
  firstTime: true
}
//Действия после ответа: Показ формы для регистрации; отправка формы - POST /gate/register
```

```ts
//Токены не совпадают (публичный сервер)
status: 401 //Unauthorized
body: {
  firstTime: false
}
//Действия после ответа: Показ формы для ввода пароля; отправка формы - POST /gate/auth
```

## `POST /gate/register`

Регистрация на сервере. В данный момент - только ввод пароля.

**REQ BODY:**

```ts
{
  login: string(len 3-20*)
  password: string(len 3-20*)
}
```

\* modifiable for server administrators

**RESPONSE:**

```ts
//Успешная регистрация
status: 200 //OK
body: {
  token: string
}
//Не забыть поместить токен в localStorage
// и начать отправлять запросы с заголовком 'Authorization': 'ТУТ ТОКЕН'
//Следующий шаг - запросить страницу самого сервера
```

## `POST /gate/auth`

Аутефикация пользователя (на данный момент - запрос пароля)

**REQ BODY:**

```ts
{
  login: string(len 3-20*)
  password: string(len 3-20*)
}
```

\* modifiable for server administrators

**RESPONSE:**

```ts
//Успешная регистрация
status: 200 //OK
body: {
  token: string
}
//Не забыть поместить токен в localStorage
// и начать отправлять запросы с заголовком 'Authorization': 'ТУТ ТОКЕН'
//Следующий шаг - запросить страницу самого сервера
```

```ts
//Неверный пароль
status: 406 //Not Acceptable
body: {
  availableTries: number(range 1-inf) //Кол-во доступных попыток на ввод пароля
}
//Если пользователь исчерпывает попытки - он получает блокировку по IP на сервере.
//Сам аккаунт не попадает под блокировку
```
